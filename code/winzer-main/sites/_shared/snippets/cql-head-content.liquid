{% comment %} Searchspring - preloaded and added as async scripts where needed on critical pages.{% endcomment %}
{%- unless template contains "collection" or template contains "search" -%}
  {% render 'searchspring-script', defer: true %}
{%- endunless -%}

{%- comment -%} Swiper assets {%- endcomment -%}
<script src="{{ 'swiper-bundle.min.js' | asset_url }}" defer="defer"></script>
{{ 'swiper-bundle.min.css' | asset_url | stylesheet_tag }}

{%- comment -%} Flickity assets {%- endcomment -%}
<script src="{{ 'flickity.pkgd.min.js' | asset_url }}" defer="defer"></script>
{{ 'flickity.css' | asset_url | stylesheet_tag }}

{% comment %} Resources to be consumed by frontend apps {% endcomment %}
<script>
  window.Resources = {
    country_code: "{{ localization.country.iso_code }}",
    shop_name: "{{ shop.name }}",
    searchspring: {
      shopifyURLs: {
        fileURL: "{{ 'placeholder.png' | file_url }}",
      },
      results: {
        currentlyViewing: "{{ 'general.searchspring.currently_viewing' | t }}",
        loadMore: "{{ 'general.searchspring.load_more' | t }}",
        viewResults: "{{ 'general.searchspring.view_results' | t }}",
        noResultsHeading: "{{ 'general.searchspring.no_results_heading' | t }}",
        noReviews: "{{ 'general.searchspring.no_reviews' | t }}",
        viewDetails: "{{ 'general.searchspring.view_details' | t }}",
        lowStock: "{{ 'general.searchspring.low_stock' | t }}",
        outOfStock: "{{ 'products.product.sold_out' | t }}",
        price: "{{ 'general.searchspring.price' | t }}",
        sku: "{{ 'general.searchspring.sku' | t }}",
        defaultUOM: "{{ 'general.searchspring.default_uom' | t }}",
        bulkTitle: "{{ 'general.searchspring.bulk_title' | t }}",
        qty: "{{ 'products.product.quantity.label' | t }}",
        sign_in_button: "{{ 'products.product.product_price_sign_in.sign_in_cta' | t }}",
        learn_more: "{{ 'products.product.product_price_sign_in.more_link' | t }}",
        sign_in_prompt: "{{ 'products.product.product_price_sign_in.text' | t }}",
        compact_sign_in_link: "{{ 'general.searchspring.compact_sign_in_link' | t }}",
        compact_sign_in_text: "{{ 'general.searchspring.compact_sign_in_text' | t }}",
        cta_text: "{{ 'products.product.exact_pricing.msg' | t }}",
        tooltip_msg: '{{ 'products.product.exact_pricing.tooltip_msg_html' | t }}',
        increment_tooltip_msg: "{{ 'products.product.quantity.increment_html' | t: increment: "<<replace>>" }}",
        not_in_catalog: "{{ 'products.product.not_in_catalog' | t }}",
      },
      toolbar: {
        filter: "{{ 'general.searchspring.filter_label' | t }}",
        sort: "{{ 'general.searchspring.sort_by_label' | t }}",
        filterDisplay: "{{ settings.filter_appearance }}",
        leftColumnLayout: "{{ settings.predictive_search_left_column_layout }}",
        showMore: "{{ 'general.searchspring.show_more' | t }}",
        showLess: "{{ 'general.searchspring.show_less' | t }}"
      },
      recommendations: {
       filterSeeResults: "{{ 'general.searchspring.view_results' | t }}",
      },
      liquid_data: {
        collection: "{{ collection.handle }}",
        sitename: "{{ shop.permanent_domain | remove: '.myshopify.com' }}",
        signed_in: "{{ customer.email }}" ? true : false
      },
      autocomplete: {
        popularProducts: "{{ 'general.search.popular_products' | t }}",
        recommendedProducts: "{{ 'general.search.recommended_products' | t }}",
        suggestions: "{{ 'general.search.suggestions' | t }}",
        topSearches: "{{ 'general.search.top_searches' | t }}",
        noResultsAutocomplete: "{{ 'general.search.no_results_autocomplete' | t }}",
        viewAllResults: "{{ 'general.search.view_all' | t }}",
      },
      exact_pricing: {
        cta_text: "{{ 'products.product.exact_pricing.msg' | t }}",
        tooltip_msg: '{{ 'products.product.exact_pricing.tooltip_msg_html' | t }}',
        user_company_id: "{{ customer.current_company.id }}"
      }
    }
  }
</script>
